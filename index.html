<!doctype html>
<html>

<head>
  <meta charset="utf8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Alternative Intelligence: Beta</title>
  <link rel="stylesheet" href="tweet.47359d5d242896bda2cc281f2ebbcd72.light.ltr.css" type="text/css" />
  <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
    crossorigin="anonymous"></script>
  <script type="text/javascript">
    $(document).ready(function () {
      $(window).scroll(fillWindow);

      var lstmWorker = new Worker("lstm-js/dist.js");
      var working = false;
      var pending = undefined;

      lstmWorker.addEventListener('message', function (e) {
        console.log('message', e);
        var message = e.data;
        switch (message.event) {
          case 'tweet':
            var container = $('#tweet-container');
            var node = $('.next-tweet');
            var next = node.clone();
            var nextHeight = node.height();
            next.css('border-bottom', 0);
            var content = $('.next-tweet > div > blockquote > div.Tweet-body.e-entry-content');

            node.removeClass('next-tweet');
            content.fadeOut(400, function () {
              content.html(formatTweet(message.data)).fadeIn(400, function () {
                container.prepend(next.css('top', '-'+nextHeight+'px').css('margin-bottom', '-'+nextHeight+'px').animate({marginBottom: 0,top:0}, 400));
                working = false;
                if (pending !== undefined) {
                  sample(pending);
                  pending = undefined;
                } else {
                  fillWindow();
                }
              });
            });
            break;
          case 'ready':
            $('.network-loading').fadeOut(400, function () {
              $('.rapper').fadeIn(400);
            });
        }
      }, false);

      function sample(t) {
        if (working) {
          pending = t;
        } else {
          working = true;
          lstmWorker.postMessage({
            cmd: 'sample',
            t: Number(t)
          });
        }
      }

      function formatTweet(text) {
        // fix literal links
        text = text.replace(/(https?:\/\/[^\s]+)/g, '<a href="$1">$1</a>');
        // replace hashtags w/ links
        text = text.replace(/#([^\s]+)/g, '<a href="https://twitter.com/hashtag/$1?src=hash">#$1</a>');
        // replace usernames w/ links
        text = text.replace(/@([^\s]+)/g, '<a href="https://twitter.com/$1">@$1</a>');
        return text;
      }

      function fillWindow() {
        if (pending === undefined && ($(window).height() > $('rapper').height()) || $(window).scrollTop() < 100) {
          sample(Math.random() * 0.9 + 0.2);
        }
      }

      fillWindow();

    });
  </script>
</head>

<body class="text-align: center">
  <div class="network-loading" style="font-family: Helvetica, Roboto, sans-serif; color: #1c2022; font-size: 16px; margin: auto; max-width: 100%; width: 500px; padding: 40px">Initializing 1,526,438 network parameters (This may take a minute)</div>
  <div class="rapper" style="display: none; margin: auto; max-width: 100%; width: 500px">
    <div id="tweet-container" data-twitter-event-id="0" class="SandboxRoot env-bp-350" style="position: relative;">
      <div class="next-tweet EmbeddedTweet js-clickToOpenTarget tweet-InformationCircle-widgetParent" data-click-to-open-target="https://twitter.com/realDonaldTrump/status/258584864163500033"
        data-iframe-title="Twitter Tweet" data-dt-full="%{hours12}:%{minutes} %{amPm} - %{day} %{month} %{year}" data-dt-months="Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec"
        data-dt-am="AM" data-dt-pm="PM" data-dt-now="now" data-dt-s="s" data-dt-m="m" data-dt-h="h" data-dt-second="second"
        data-dt-seconds="seconds" data-dt-minute="minute" data-dt-minutes="minutes" data-dt-hour="hour" data-dt-hours="hours"
        data-dt-abbr="%{number}%{symbol}" data-dt-short="%{day} %{month}" data-dt-long="%{day} %{month} %{year}" data-scribe="page:tweet"
        id="twitter-widget-0" lang="en" data-twitter-event-id="1" style="border-radius: 0px;">
        <div class="EmbeddedTweet-tweet">
          <blockquote class="Tweet h-entry js-tweetIdInfo subject expanded
                   is-deciderHtmlWhitespace" cite="https://twitter.com/realDonaldTrump/status/258584864163500033" data-tweet-id="258584864163500033"
            data-scribe="section:subject">
            <div class="Tweet-header u-cf">
              <div class="Tweet-brand u-floatRight">
                <span class="u-hiddenInNarrowEnv">
<a class="FollowButton follow-button profile" data-scribe="component:followbutton" href="https://twitter.com/realDonaldTrump" role="button" title="Follow Donald J. Trump on Twitter"><span class="FollowButton-bird"><div class="Icon Icon--twitter " aria-label="" title="" role="presentation"></div></span>                Follow</a>
                </span>
                <span class="u-hiddenInWideEnv"><a href="https://twitter.com/download" data-scribe="element:logo"><div class="Icon Icon--twitter " aria-label="Get Twitter app" title="Get Twitter app" role="img"></div></a></span>
              </div>
              <div class="TweetAuthor " data-scribe="component:author">
                <a class="TweetAuthor-link Identity u-linkBlend" data-scribe="element:user_link" href="https://twitter.com/realDonaldTrump"
                  aria-label="Donald J. Trump (screen name: realDonaldTrump)">
                  <span class="TweetAuthor-avatar Identity-avatar">
      <img class="Avatar" data-scribe="element:avatar" data-src-2x="https://pbs.twimg.com/profile_images/1980294624/DJT_Headshot_V2_bigger.jpg" alt="" data-src-1x="https://pbs.twimg.com/profile_images/1980294624/DJT_Headshot_V2_normal.jpg" src="https://pbs.twimg.com/profile_images/1980294624/DJT_Headshot_V2_bigger.jpg">
    </span>
                  <span class="TweetAuthor-name Identity-name customisable-highlight" title="Donald J. Trump" data-scribe="element:name">Donald J. Trump</span>
                  <span class="TweetAuthor-verifiedBadge" data-scribe="element:verified_badge"><div class="Icon Icon--verified " aria-label="Verified Account" title="Verified Account" role="img"></div><b class="u-hiddenVisually">âœ”</b></span>
                  <span class="TweetAuthor-screenName Identity-screenName" title="@realDonaldTrump" data-scribe="element:screen_name" dir="ltr">@realDonaldTrump</span>
                </a>
              </div>
            </div>
            <div class="Tweet-body e-entry-content" data-scribe="component:tweet">
              <div class="loader" style="width: 100%; text-align: center">
                <img src="loader.gif" />
              </div>
            </div>
          </blockquote>
        </div>
      </div>
    </div>
  </div>
</body>
</html>
